<div class="container-sm">
<table class="table table-striped">
    <thead>
    <tr>
        <th>DIÁRIO</th>
        <th>SUBSTITUTO</th>
        <th>DATA</th>
        <th></th>
    </tr>
    </thead>
    <tbody>
    {{#each permutas}}
        <tr>
            <td>{{this.diario.descricao}}</td>
            <td>{{this.substituto.descricao}}</td>
            <td>{{this.data}}</td>
            <td>
                <button class="btn btn-primary btn-sm verDetalhes"
                        data-id="{{this.id}}"
                        data-diario="{{this.diario.descricao}}"
                        data-substituto="{{this.substituto.descricao}}"
                        data-dia="{{this.dia}}"
                        data-data="{{this.data}}"
                        data-horario="{{this.horarios}}"
                        data-justificativa="{{this.justificativa}}">
                    Ver Detalhes
                </button>
            </td>
        </tr>
    {{/each}}
    </tbody>
</table>

<!-- Modal -->
<div class="modal fade" id="permutaModal" tabindex="-1" aria-labelledby="permutaModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="permutalModalLabel">Detalhes da Permuta</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p><strong>DIARIO:</strong> <span id="modalDiario"></span></p>
                <p><strong>SUBSTITUTO:</strong> <span id="modalSubstituto"></span></p>
                <p><strong>DATA:</strong> <span id="modalData"></span></p>
                <p><strong>DIA:</strong> <span id="modalDia"></span></p>
                <p><strong>HORÁRIOS:</strong> <span id="modalHorario"></span></p>
                <p><strong>JUSTIFICATIVA:</strong> <span id="modalJustificativa"></span></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
            </div>
        </div>
    </div>
</div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const modal = new bootstrap.Modal(document.getElementById("permutaModal"));

        document.querySelectorAll(".verDetalhes").forEach(button => {
            button.addEventListener("click", function () {
                // Pega os atributos data-* do botão
                document.getElementById("modalDiario").textContent = this.getAttribute("data-diario");
                document.getElementById("modalSubstituto").textContent = this.getAttribute("data-substituto");
                document.getElementById("modalData").textContent = this.getAttribute("data-data");
                document.getElementById("modalDia").textContent = this.getAttribute("data-dia");
                document.getElementById("modalHorario").textContent = this.getAttribute("data-horario");
                document.getElementById("modalJustificativa").textContent = this.getAttribute("data-justificativa");

                // Abre o modal
                modal.show();
            });
        });
    });
</script>

</div>